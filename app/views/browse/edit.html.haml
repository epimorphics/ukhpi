%h2.o-heading--2 Change your selections

%p
  Use this page to change the UKHPI statistics that are displayed on the main
  browse page.

= form_tag(edit_browse_path, method: :get) do

  %h3.o-heading--3 Location

  - if @view_state.selected_location
    %p
      The currently selected location is:
      = succeed '.' do
        %strong
          = @view_state.selected_location_label
      To select another location, search for the location name below.

  - if @view_state.matched_locations
    %h3.o-heading--3 Search results
    %p
      Locations matching search term
      %code
        = @view_state.user_selections.location_search_term
      of type
      = succeed ':' do
        %code
          = @view_state.user_selections.location_search_type
    %ul
      - @view_state.matched_locations[0..9].each do |location|
        %li
          %a{ href: @view_state.with_location_path(location) }
            = location.label
      - if @view_state.matched_locations.length > 10
        %li
          &hellip; and #{@view_state.matched_locations.length - 10} more

  - else
    %p
      = label_tag(:'location-type', 'Location type')
      = select_tag(:'location-type', options_for_select(@view_state.location_type_options))

    %p
      = label_tag(:'location-term', 'Search for a location')
      = text_field_tag(:'location-term')

    %button{ type: 'submit', value: 'search', name: 'form-action' }
      Search
