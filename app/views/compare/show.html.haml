.grid-row
  .column-full
    %article.c-compare
      %h2.o-heading--2
        = @view_state.headline_summary

      %p.c-compare__locations
        Between:
        %ul.c-compare__locations-list
        - @view_state.selected_locations.each do |location|
          %li.c-compare__location
            = location.label
            = link_to(@view_state.without_location(location)) do
              %i.fa.fa-times

      %table.c-compare__results
        %thead
          %tr
            %th{ scope: 'col' }
              Date
            - @view_state.query_results.keys.sort.each do |location_name|
              %th{ scope: 'col' }
                = location_name
        %tbody
          - @view_state.query_results_rows.each do |row|
            %tr{ class: cycle('u-row-odd', 'u-row-even') }
              %th{ scope: 'row' }
                = row.shift
              - row.each do |value|
                %td
                  = value

      %h3.o-heading--3 Change view
      %p
        You can select a different comparison between the selected locations:

      %table.c-compare__choices
        %thead
          %tr
            %th
            %th{ scope: 'col' }
              house price index
            %th{ scope: 'col' }
              average price
            %th{ scope: 'col' }
              \% monthly change
            %th{ scope: 'col' }
              \% yearly change
            %th{ scope: 'col' }
              volume
        %tbody
          - @view_state.statistic_indicator_choices.each do |choices|
            - statistic = choices.first
            - cells = choices.second
            %tr{ class: cycle('u-row-odd', 'u-row-even') }
              %th{ scope: 'row' }
                = t(statistic.label_key)
              - cells.each do |stat, indicator|
                %td.c-compare__selection
                  - if stat && @view_state.current_selection?(stat, indicator)
                    %i.fa.fa-check.c-compare__selection--current
                  - elsif stat
                    = link_to(@view_state.with_statistic(stat, indicator)) do
                      %i.fa.fa-square-o
